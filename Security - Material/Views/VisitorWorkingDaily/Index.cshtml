@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="main-body" style="height:100%;">
    <div class="card card-underline">
        <div class="card-head">
            <ul class="nav nav-tabs pull-left" data-toggle="tabs">
                <li class="active"><a href="#divVisitor" name="tabVisitor">Khách</a></li>
                <li><a href="#divVehicle" name="tabVisitor">Xe</a></li>
                <li><a href="#divContainer" name="tabVisitor">Công</a></li>
                <li><a href="#divApplications" name="tabVisitor">Danh sách đơn</a></li>
            </ul>
        </div><!--end .card-head -->
        <form class="form" role="form">
            <div class="card-body tab-content">
                <div class="tab-pane active" id="divVisitor" name="tabVisitorContent" style="padding:3px">
                    <div class="row">
                        <div class="col-md-12">
                            <div id="toolbar" class="card" style="background-color:white; height:58px; padding:5px; margin-bottom:10px !important">

                                <div class="form-group date" id="txtWorkDateDefault" style="float:left; padding:0 10px 0 0; width: 110px">
                                    <div class="input-group-content">
                                        <input type="text" class="form-control input-sm" value="@string.Format("{0:yyyy.MM.dd}", DateTime.Now)">
                                        <label for="txtWorkDateDefault">Ngày làm việc</label>
                                    </div>
                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                </div>
                                <div style="float:left; width:200px; padding:0 10px 0 0">
                                    <div class="form-group">
                                        <select id="cbGate" class="form-control input-sm">
                                            <option value="">&nbsp;</option>
                                        </select>
                                        <label for="cbGate">Cổng</label>
                                        <input type="hidden" id="hdfGateDefaultId" value="@ViewBag.GateDefaultId" />
                                    </div>
                                </div>
                                <div style="float:left;width:130px;padding-right:10px; display:none">
                                    <div class="form-group">
                                        <select id="cbApplicationType" class="form-control input-sm">
                                            <option value="8">Ngắn hạn</option>
                                            <option value="9">Dài hạn</option>
                                        </select>
                                        <label for="cbApplicationType">Loại đơn</label>
                                    </div>
                                </div>
                                <div style="float: right; padding-top:10px">
                                    <button id="btnSearch" type="button" class="btn ink-reaction btn-raised btn-sm btn-primary">Xem</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-7">
                            <div id="grdVisitorListChecking"></div>
                        </div>
                        <div class="col-md-5">
                            <div class="row">
                                <div class="col-md-7">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <input type="text" class="form-control input-sm change-data" id="txtMdVisitorIdentityCard" maxlength="15" readonly>
                                                <label for="txtMdVisitorIdentityCard">CMND</label>
                                                <input type="hidden" id="hdfDetailPersonId" value="0" />
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="form-group">
                                                <input type="text" class="form-control input-sm change-data" id="txtMdVisitorFullName" maxlength="200" readonly>
                                                <label for="txtMdVisitorFullName">Tên</label>
                                                <input type="hidden" id="hdfMdVisitorImage" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <input type="text" class="form-control input-sm change-data" id="txtMdVisitorCompany" readonly>
                                                <label for="txtMdVisitorCompany">Tên công ty</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <input type="text" class="form-control input-sm change-data" id="txtMdVisitorFromDate" readonly>
                                                <label for="txtMdVisitorFromDate">Từ ngày</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <input type="text" class="form-control input-sm change-data" id="txtMdVisitorToDate" readonly>
                                                <label for="txtMdVisitorToDate">Đến ngày</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <input type="text" class="form-control input-sm change-data" id="txtMdVisitorCurrentTime" readonly>
                                                <label for="txtMdVisitorCurrentTime">Thời gian hiện tại</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-5" style="position:relative">
                                    <img id="txtImage" class="img-thumbnail border-white border-xl img-responsive auto-width" src="../../Content/assets/img/none-image.png" alt=""
                                         style="position:absolute; right:0; left:0;margin:auto; width:206px; height:254px">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVisitorGate" readonly>
                                        <label for="txtMdVisitorGate">Cổng đăng ký</label>
                                    </div>
                                </div>
                            </div>
                            @*<div class="row">*@

                            @*<div class="col-md-3">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVisitorWorkDate" readonly>
                                        <label for="txtMdVisitorWorkDate">Work Date</label>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVisitorTimeIn" readonly>
                                        <label for="txtMdVisitorTimeIn">Time In</label>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVisitorTimeOut" readonly>
                                        <label for="txtMdVisitorTimeOut">Time Out</label>
                                    </div>
                                </div>*@
                            @*</div>*@
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVisitorCardNo" style="text-transform:uppercase">
                                        <label for="txtMdVisitorCardNo" class="label-require">Thẻ khách</label>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVisitorRemark">
                                        <label for="txtMdVisitorCardNo">Ghi chú</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div style="float: right; padding-top:10px">
                                        <div class="btn-group" data-toggle="buttons" id="btnVisitorCheckOff" name="btnLongTerm" style="display:none">
                                            <label class="btn ink-reaction btn-primary">
                                                <i class="fa fa-calendar-times" font-size:15px"></i> Check Off
                                            </label>
                                        </div>
                                        <div class="btn-group" data-toggle="buttons" id="btnVisitorCheckIn" name="btnShortTerm">
                                            <label class="btn ink-reaction btn-primary">
                                                <i class="fa fa-sign-in-alt" style="transform:rotate(180deg); font-size:15px"></i> Cho vào
                                            </label>
                                        </div>
                                        <div class="btn-group" data-toggle="buttons" id="btnVisitorCheckOut" name="btnShortTerm">
                                            <label class="btn ink-reaction btn-primary">
                                                <i class="fa fa-sign-out-alt"></i> Cho ra
                                            </label>
                                        </div>
                                        @*<button type="button" id="btnVisitorCheckIn" class="btn ink-reaction btn-raised btn-sm btn-primary">Check In</button>
                                            <button type="button" id="btnVisitorCheckOut" class="btn ink-reaction btn-raised btn-sm btn-primary">Check Out</button>*@
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="divVehicle" name="tabVisitorContent" style="padding:3px">
                    <div class="row">
                        <div class="col-md-12">
                            <div id="toolbar" class="card" style="background-color:white; height:58px; padding:5px; margin-bottom:10px !important">

                                <div class="form-group date" id="txtWorkDateDefaultVehicle" style="float:left; padding:0 10px 0 0; width: 110px">
                                    <div class="input-group-content">
                                        <input type="text" class="form-control input-sm" value="@string.Format("{0:yyyy.MM.dd}", DateTime.Now)">
                                        <label for="txtWorkDateDefaultVehicle">Ngày làm việc</label>
                                    </div>
                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                </div>
                                <div style="float:left; width:200px; padding:0 10px 0 0">
                                    <div class="form-group">
                                        <select id="cbGateVehicle" class="form-control input-sm">
                                            <option value="">&nbsp;</option>
                                        </select>
                                        <label for="cbGateVehicle">Cổng</label>
                                    </div>
                                </div>
                                <div style="float:left; width:130px; padding-right:10px; display:none">
                                    <div class="form-group">
                                        <select id="cbApplicationTypeVehicle" class="form-control input-sm">
                                            <option value="8">Short Term</option>
                                            <option value="9">Long Term</option>
                                        </select>
                                        <label for="cbApplicationTypeVehicle">Loại đơn</label>
                                    </div>
                                </div>
                                <div style="float: right; padding-top:10px">
                                    <button id="btnSearchVehicle" type="button" class="btn ink-reaction btn-raised btn-sm btn-primary">Xem</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <div id="grdVehicleListChecking"></div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <select id="cbMdVisitorVehicleType" class="form-control input-sm">
                                            <option value="">&nbsp;</option>
                                        </select>
                                        <label for="cbMdVisitorVehicleType">Loại xe</label>
                                        <input type="hidden" id="hdfDetailVehicleId" value="0" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVendorDriverPlate" maxlength="20">
                                        <label for="txtMdVendorDriverPlate">Biển số xe</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVehicleCompany" readonly>
                                        <label for="txtMdVehicleCompany">Tên công ty</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVehicleGate" readonly>
                                        <label for="txtMdVehicleGate">Cổng đăng ký</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVehicleFromDate" readonly>
                                        <label for="txtMdVehicleFromDate">Từ ngày</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVehicleToDate" readonly>
                                        <label for="txtMdVehicleToDate">Tới ngày</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVisitorCurrentTimeVehicle" readonly>
                                        <label for="txtMdVisitorCurrentTimeVehicle">Thời gian hiện tại</label>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVehicleNewDriver">
                                        <label for="txtMdVehicleNewDriver">Tài xế</label>
                                    </div>
                                </div>
                                @*<div class="col-md-3">
                                        <div class="form-group">
                                            <input type="text" class="form-control input-sm change-data" id="txtMdVehicleWorkDate" readonly>
                                            <label for="txtMdVehicleWorkDate">Work Date</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <input type="text" class="form-control input-sm change-data" id="txtMdVehicleTimeIn" readonly>
                                            <label for="txtMdVehicleTimeIn">Time In</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <input type="text" class="form-control input-sm change-data" id="txtMdVehicleTimeOut" readonly>
                                            <label for="txtMdVehicleTimeOut">Time Out</label>
                                        </div>
                                    </div>*@
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVehicleCardNo" style="text-transform:uppercase">
                                        <label for="txtMdVehicleCardNo" class="label-require">Số thẻ xe</label>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVehicleRemark">
                                        <label for="txtMdVehicleCardNo">Ghi chú</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div style="float: right; padding-top:10px">
                                        <div class="btn-group" data-toggle="buttons" id="btnVehicleCheckOff" name="btnLongTermVehicle" style="display:none">
                                            <label class="btn ink-reaction btn-primary">
                                                <i class="fa fa-calendar-times" font-size:15px"></i> Check Off
                                            </label>
                                        </div>
                                        <div class="btn-group" data-toggle="buttons" id="btnVehicleCheckIn" name="btnShortTermVehicle">
                                            <label class="btn ink-reaction btn-primary">
                                                <i class="fa fa-sign-in-alt" style="transform:rotate(180deg); font-size:15px"></i> Cho vào
                                            </label>
                                        </div>
                                        <div class="btn-group" data-toggle="buttons" id="btnVehicleCheckOut" name="btnShortTermVehicle">
                                            <label class="btn ink-reaction btn-primary">
                                                <i class="fa fa-sign-out-alt"></i> Cho ra
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div><!--end #divVehicle -->

                <div class="tab-pane" id="divContainer" name="tabVisitorContent" style="padding:3px">
                    <div class="row">
                        <div class="col-md-12">
                            <div id="toolbar" class="card" style="background-color:white; height:58px; padding:5px; margin-bottom:10px !important">

                                <div class="form-group date" id="txtWorkDateDefaultContainer" style="float:left; padding:0 10px 0 0; width: 110px">
                                    <div class="input-group-content">
                                        <input type="text" class="form-control input-sm" value="@string.Format("{0:yyyy.MM.dd}", DateTime.Now)">
                                        <label for="txtWorkDateDefaultContainer">Ngày làm việc</label>
                                    </div>
                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                </div>
                                <div style="float:left;width:200px; padding:0 10px 0 0">
                                    <div class="form-group">
                                        <select id="cbGateContainer" class="form-control input-sm">
                                            <option value="">&nbsp;</option>
                                        </select>
                                        <label for="cbGateContainer">Cổng</label>
                                    </div>
                                </div>
                                <div style="float: right; padding-top:10px">
                                    <button id="btnSearchContainer" type="button" class="btn ink-reaction btn-raised btn-sm btn-primary">Xem</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <div id="grdContainerListChecking"></div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtVendorId" readonly>
                                        <label for="txtVendorId">Công ty vận chuyển</label>
                                        <input type="hidden" id="hdfDetailContainerId" value="0" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtContainerNumber" readonly>
                                        <label for="txtContainerNumber">Số công</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtContainerGate" readonly>
                                        <label for="txtContainerGate">Cổng đăng ký</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtContainerFromDate" readonly>
                                        <label for="txtContainerFromDate">Từ ngày</label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtContainerToDate" readonly>
                                        <label for="txtContainerToDate">Tới ngày</label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtMdVisitorCurrentTimeContainer" readonly>
                                        <label for="txtMdVisitorCurrentTimeContainer">Thời gian hiện tại</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtVehiclePlate" data-toggle="modal" data-target="#mdVehicleListCurrent" readonly style="cursor:pointer">
                                        <label for="txtVehiclePlate">Biển số xe</label>
                                        <input type="hidden" id="hdfVehicleId" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtDriverName" readonly>
                                        <label for="txtDriverName">Tên tài xế</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <input type="text" class="form-control input-sm change-data" id="txtContainerRemark">
                                        <label for="txtContainerRemark">Ghi chú</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div style="float: right; padding-top:10px">
                                        <div class="btn-group" data-toggle="buttons" id="btnContainerCheckIn" name="btnShortTermContainer">
                                            <label class="btn ink-reaction btn-primary">
                                                <i class="fa fa-sign-in-alt" style="transform:rotate(180deg); font-size:15px"></i> Cho vào
                                            </label>
                                        </div>
                                        <div class="btn-group" data-toggle="buttons" id="btnContainerCheckOut" name="btnShortTermContainer">
                                            <label class="btn ink-reaction btn-primary">
                                                <i class="fa fa-sign-out-alt"></i> Cho ra
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div><!--end #divContainer -->

                <div class="tab-pane" id="divApplications" name="tabVisitorContent" style="padding:3px">
                    <div id="toolbar" class="card" style="background-color:white; height:58px; padding:5px; margin-bottom:10px !important">
                        <div class="input-daterange input-group" id="txtCreateDateRange" style="float:left; padding-right:10px">
                            <div class="form-group" style="padding:0">
                                <div class="input-group-content" style="width:90px">
                                    <input type="text" class="form-control input-sm input-date" name="start" value="@string.Format("{0:yyyy.MM.dd}", new DateTime(DateTime.Now.Year, DateTime.Now.Month, 1))" />
                                    <label>Ngày tạo</label>
                                </div>
                                <span class="input-group-addon">đến</span>
                                <div class="input-group-content" style="width:90px">
                                    <input type="text" class="form-control input-sm input-date" name="end" value="@string.Format("{0:yyyy.MM.dd}", new DateTime(DateTime.Now.Year, DateTime.Now.Month + 1, 1).AddDays(-1))" />
                                    <div class="form-control-line"></div>
                                </div>
                            </div>
                        </div>

                        <div style="float:left;width:130px;padding-right:10px">
                            <div class="form-group">
                                <select id="cbApplicationTypeMaster" class="form-control input-sm">
                                    <option value="">&nbsp;</option>
                                    <option value="8">Ngắn hạn</option>
                                    <option value="9">Dài hạn</option>
                                </select>
                                <label for="cbApplicationTypeMaster">Loại đơn</label>
                            </div>
                        </div>

                        <div style="float:left;width:130px">
                            <div class="form-group">
                                <select id="cbStatus" class="form-control input-sm">
                                    <option value="">&nbsp;</option>
                                </select>
                                <label for="cbStatus">Trạng thái</label>
                            </div>
                        </div>

                        <div style="float: right; padding-top:10px">
                            <button id="btnSearchApplication" type="button" class="btn ink-reaction btn-raised btn-sm btn-primary">Xem</button>
                        </div>
                    </div>
                    <div id="grdApplicationMaster"></div>
                    <input type="hidden" id="hdfIsView" />
                </div><!--end #divApplications -->
            </div><!--end .card-body -->
        </form>
    </div><!--end .card -->

</div>

<div>
    <!-- BEGIN FORM MODAL APPLICATION DETAIL -->
    <div class="modal fade" id="mdAppDetailView" tabindex="-1" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:80%">

        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <!-- END FORM MODAL APPLICATION DETAIL -->
    <!-- BEGIN FORM MODAL TERM OF USE -->
    <div class="modal fade" id="mdReadTermOfUse" tabindex="-1" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:30%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="">Notices</h4>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="hdfVendorId" />
                    <input type="hidden" id="hdfApplicationId" />
                    <div class="form-group">
                        <div class="checkbox checkbox-styled">
                            <span>
                                Please make sure that the vendor has read the commitment before entering the company.
                            </span>
                            <br />
                            <span>
                                Please contact to the General Affair department for more information.
                            </span><br />
                            @*<label>

                                <span>
                                If signed, please tick here, and click save.
                                </span>
                                <input id="cbTermsOfUse" type="checkbox">

                                </label>*@
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    @*<button type="button" class="btn btn-primary" id="btnMdSave" style="display:none">Save</button>*@
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <!-- BEGIN LIST OF VEHICLE  -->
    <div class="modal fade" id="mdVehicleListCurrent" tabindex="-1" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:50%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="">List of Vehicles</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div id="gridListVehicleCurrent">

                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal LIST OF VEHICLE -->

</div>



<script type="text/javascript">
    (function (namespace, $) {
        "use strict";
        var _entity = {
            Id: 0, ApplicationMaster: 0, Image: "", FullName: "", IdentityCard: "", PhoneNumber: "",
            FromDate: "", ToDate: "", IsWorkHourOfficial: true
        };
        var _para = { fromDate: _minDate.toISOString(), toDate: _maxDate.toISOString(), applicationType: "", userId: "", approvalStatus: "" };

        var FormVisitorWorkingDaily = function () {
            // Create reference to this instance
            var o = this;
            // Initialize app when document is ready
            $(document).ready(function () {
                o.initialize();
            });

        };
        var p = FormVisitorWorkingDaily.prototype;

        // =========================================================================
        // INIT
        // =========================================================================
        var _visitor = {
            VisitorId: 0, ApplicationMaster: 0, Image: "", VisitorName: "", IdentityCard: "", PhoneNumber: "",
            FromDate: "", ToDate: "", IsWorkHourOfficial: true, VendorName: "", GateNameRegis: "", TimeIn: "", TimeOut: ""
        }
        var _vehicle = {
            VehicleId: 0, ApplicationMaster: 0, VehicleType: "", VehicleTypeName: "", DriverPlate: "",
            FromDate: "", ToDate: "", VendorName: "", GateNameRegis: "", TimeIn: "", TimeOut: ""
        }

        p.initialize = function () {
            var o = this;

            $('#txtCreateDateRange').datepicker({ todayHighlight: true, format: _dateFormat });
            $("#txtWorkDateDefault").datepicker({ autoclose: true, todayHighlight: true, format: _dateFormat });
            $("#txtWorkDateDefaultVehicle").datepicker({ autoclose: true, todayHighlight: true, format: _dateFormat });
            $("#txtWorkDateDefaultContainer").datepicker({ autoclose: true, todayHighlight: true, format: _dateFormat });

            fnGetCateValueViaCateId("07643577-62D2-4AA3-83B6-148664A731EF", false, $("#cbGate"), $("#hdfGateDefaultId").val());
            fnGetCateValueViaCateId("07643577-62D2-4AA3-83B6-148664A731EF", false, $("#cbGateVehicle"), $("#hdfGateDefaultId").val());
            fnGetCateValueViaCateId("07643577-62D2-4AA3-83B6-148664A731EF", false, $("#cbGateContainer"), $("#hdfGateDefaultId").val());
            fnGetCateValueViaParent("054E0F62-4EFE-41E1-A18D-5C28A6531539", false, $("#cbStatus"), 'EAF964F0-F557-40C7-AD06-F0B4A6571A4F', "00f2ec64-cc9b-4fca-ab4c-b37961efad53");

            fnGetCateValueViaCateId("AED27DE5-1310-4A02-997B-87A6EF9686BD", false, $("#cbMdVisitorVehicleType"));


            var interval = setInterval(function () {
                var momentNow = new Date();
                $('#txtMdVisitorCurrentTime').val(kendo.toString(momentNow, "yyyy.MM.dd hh:mm:ss"));
                $('#txtMdVisitorCurrentTimeVehicle').val(kendo.toString(momentNow, "yyyy.MM.dd hh:mm:ss"));
                $('#txtMdVisitorCurrentTimeContainer').val(kendo.toString(momentNow, "yyyy.MM.dd hh:mm:ss"));
            }, 100);

            setTimeout(function () {
                o._gridVisitorInit();
                //o._gridVehicleInit();
                //o._gridContainerInit();
            }, 1000);

            o._gridApplicationMasterInit();
        };

        // =========================================================================
        // SELECT DATA FROM DB
        // =========================================================================
        p._gridApplicationMasterInit = function() {

            var dateRange = $("#txtCreateDateRange").find("input");
            _para.fromDate = _isValidDate($(dateRange[0]).val(), _minDate).toISOString();
            _para.toDate = _isValidDate($(dateRange[1]).val(), _maxDate).toISOString();
            _para.applicationType = $("#cbApplicationTypeMaster").val();
            _para.approvalStatus = $("#cbStatus").val();
            _para.userId = $("#hdfLogInId").val();

            $("#grdApplicationMaster").html("");

            $("#grdApplicationMaster").kendoGrid({
                excel: {
                    fileName: "VisitorApplicationList_" + (new Date()).toLocaleDateString() + ".xlsx",
                    filterable: true,
                    allPages: true
                },
                dataSource: {
                    transport: {
                        read: "/VisitorApplicationMaster/GetForSecurity?fromDate=" + _para.fromDate + "&toDate=" + _para.toDate + "&applicationType=" + _para.applicationType + "&approvalStatus=" + _para.approvalStatus,
                        create: {
                            cache: true
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                Id: { type: "int" }, IdEncypt: { type: "string" }, Code: { type: "string" }, Vendor: { type: "string" }, VendorName: { type: "string" },
                                Applicant: { type: "string" }, ApplicantName: { type: "string" }, Purpose: { type: "string" },
                                PurposeName: { type: "string" }, Gate: { type: "string" }, GateName: { type: "string" }, ApplicationType: { type: "string" }, ApplicationTypeName: { type: "string" },
                                ApprovalLineJson: { type: "string" }, ApprovalLine: { type: "string" }, ApprovalStatus: { type: "string" }, ApprovalStatusName: { type: "string" },
                                LocationOther: { type: "string" }, ApprovalKind: { type: "string" }, ApprovalKindName: { type: "string" }, FromDate: { type: "date" }, ToDate: { type: "date" },
                                Location: { type: "string" }, ContactPerson: { type: "string" }, ContactNumber: { type: "string" },
                                OrgName: { type: "string" }, PlantName: { type: "string" }, DeptName: { type: "string" }, SectionName: { type: "string" }, ConfirmDate: { type: "date" },
                                NextApprover: { type: "string" }, NextApproverName: { type: "string" }, CreateUid: { type: "string" }, CreateName: { type: "string" }, CreateDate: { type: "date" }
                            }
                        }
                    },
                    pageSize: 20
                },
                height: $('footer').position().top - 224,
                filterable: {
                    mode: "row"
                },
                dataBound: function (e) {
                    this.element.find(".k-filtercell .k-autocomplete .k-clear-value").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-button").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-operator-hidden").css({ "padding-right": 0 });
                    this.element.find(".k-filter-row .k-filtercell").find("input").attr("placeholder", "Tìm kiếm...")

                    var grid = this;
                    grid.tbody.find("tr").each(function (e) {
                        $(this).css("white-space", "nowrap");
                        var model = grid.dataItem(this);
                        switch (model.ApprovalStatus.toUpperCase()) {
                            case "9C817780-2079-4417-B87B-B7E537BBAE8A"://temporary
                                $(this).children().first().addClass("style-warning");
                                break;
                            case "C4FF5A2F-CD32-4785-9499-A26E5148D58D"://process
                                $(this).children().first().addClass("style-info");
                                break;
                            case "00F2EC64-CC9B-4FCA-AB4C-B37961EFAD53"://approve
                                $(this).children().first().addClass("style-success");
                                break;
                            case "9A96D85B-8189-46BA-84CD-3389FDC501B7"://reject
                                $(this).children().first().addClass("style-danger");
                                break;
                            default:
                        }

                        if (!model.IsView)
                            $(this).css("font-weight", "bold");
                    });
                },
                selectable: "row",
                sortable: true,
                pageable: true,
                resizable: true,
                cache: false,
                navigatable: true,
                columns: [
                    { title: "", template: "", width: 5 },
                    { field: "Code", title: "Mã đơn", width: "171px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "VendorName", title: "Tên công ty", width: "145px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "PurposeName", title: "Mục đích", width: "165px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "LocationName", title: "Khu vực", width: "270px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "LocationOther", title: "Khu vực khác", width: "180px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    {
                        title: "Ngày vào",
                        columns: [
                            { field: "FromDate", title: "Từ", format: "{0:yyyy.MM.dd}", width: "111px", filterable: false, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                            { field: "ToDate", title: "Đến", format: "{0:yyyy.MM.dd}", width: "111px", filterable: false, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } }
                        ], headerAttributes: _headerAttributes
                    },
                    {
                        title: "Thông tin liên hệ",
                        columns: [
                            { field: "ContactPerson", title: "Người", width: "140px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                            { field: "ContactNumber", title: "Số điện thoại", width: "113px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                        ], headerAttributes: _headerAttributes
                    },
                    {
                        title: "Phê duyệt",
                        columns: [
                            { field: "ConfirmDate", title: "Xác nhận", format: "{0:yyyy.MM.dd}", width: "111px", filterable: false, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                            { field: "ApprovalStatusName", title: "Trạng thái", width: "116px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                            { field: "NextApproverName", title: "Người duyệt tiếp theo", width: "155px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                        ], headerAttributes: _headerAttributes
                    },
                    {
                        title: "Person in Charge",
                        columns: [
                            { field: "Applicant", title: "Mã nhân viên", width: "111px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                            { field: "ApplicantName", title: "tên", width: "155px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                            { field: "OrgName", title: "Công ty", width: "140px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                            { field: "PlantName", title: "Nhà máy", width: "140px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                            { field: "DeptName", title: "Phòng", width: "140px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                            { field: "SectionName", title: "Nhóm", width: "140px", filterable: { cell: { showOperators: false, operator: "contains" } } }
                        ], headerAttributes: _headerAttributes
                    },
                    { field: "CreateUid", title: "Mã người tạo", width: "111px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "CreateName", title: "Tên người tạo", width: "155px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "CreateDate", title: "Ngày tạo", format: "{0:yyyy.MM.dd}", width: "111px", filterable: false, lockable: false, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } }
                ]
            });
        }
        p._gridListVehicleCurrentInit = function () {
            $("#gridListVehicleCurrent").html("");
            $("#gridListVehicleCurrent").kendoGrid({
                dataSource: {
                    transport: {
                        read: "/VisitorWorkingDaily/VehicleGetListCurrent",
                        create: {
                            cache: true
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                WorkDate: { type: "date" }
                            }
                        }
                    },
                    pageSize: 20
                },
                filterable: {
                    mode: "row"
                },
                dataBound: function (e) {
                    this.element.find(".k-filtercell .k-autocomplete .k-clear-value").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-button").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-operator-hidden").css({ "padding-right": 0 });
                    this.element.find(".k-filter-row .k-filtercell").find("input").attr("placeholder", "Tìm kiếm...")

                    var grid = this;
                    grid.tbody.find("tr").each(function (e) {
                        $(this).css("white-space", "nowrap");
                    });

                },
                height: $('footer').position().top - 160,
                selectable: "row",
                sortable: true,
                pageable: true,
                resizable: true,
                cache: false,
                columns: [
                    //{ title: "", template: "", width: 5 },
                    { field: "DriverName", title: "Tên tài xế", width: "232px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "DriverPlate", title: "Biển số xe", width: "100px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "WorkDate", title: "Ngày làm việc", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false },
                    { field: "ScanTime", title: "Thời gian kiểm tra", width: "90px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                ]

            });
        }

        // =========================================================================
        // FORM VISITOR
        // =========================================================================
        //GRID VISITOR
        p._gridVisitorInit = function () {
            $("#grdVisitorListChecking").html("");
            //short term
            if ($("#cbApplicationType").val() === "8") {
                $("div[name='btnShortTerm']").show();
                $("div[name='btnLongTerm']").hide();

            } else {
                $("div[name='btnShortTerm']").hide();
                $("div[name='btnLongTerm']").show();
            }

            $("#grdVisitorListChecking").kendoGrid({
                dataSource: {
                    transport: {
                        read: "/VisitorWorkingDaily/VisitorGetList?workDate=" + $("#txtWorkDateDefault").datepicker("getDate").toISOString() + "&gateId=" + $("#cbGate").val() + "&applicationType=" + $("#cbApplicationType").val(),
                        create: {
                            cache: true
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                FromDate: { type: "date" },
                                ToDate: { type: "date" },
                                WorkHourOfficle: { type: "bool" },
                                WorkDate: { type: "date" },
                                CreateDate: { type: "date" },
                                NumCheck: { type: "number" }
                            }
                        }
                    },
                    pageSize: 20
                },
                filterable: {
                    mode: "row"
                },
                dataBound: function (e) {
                    this.element.find(".k-filtercell .k-autocomplete .k-clear-value").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-button").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-operator-hidden").css({ "padding-right": 0 });
                    this.element.find(".k-filter-row .k-filtercell").find("input").attr("placeholder", "Tìm kiếm...")

                    var grid = this;
                    grid.tbody.find("tr").each(function (e) {
                        $(this).css("white-space", "nowrap");
                    });

                },
                height: $('footer').position().top - 224,
                selectable: "row",
                sortable: true,
                pageable: true,
                resizable: true,
                cache: false,
                detailInit: p._detailInit,
                columns: [
                    //{ title: "", template: "", width: 5 },
                    { field: "NumCheck", title: "Số lần kiểm tra", width: "90px", attributes: { "class": "text-right" }, filterable: { cell: { showOperators: false } } },
                    { field: "Code", title: "Mã đơn", width: "171px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "VendorName", title: "Tên công ty", width: "232px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "IdentityCard", title: "CMND", width: "120px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "VisitorName", title: "Tên khách", width: "170px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "VisitorCard", title: "Số thẻ khách", width: "120px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "PhoneNumber", title: "Số điện thoại", width: "130px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "FromDate", title: "Từ ngày", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false },
                    { field: "ToDate", title: "Đến ngày", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false },
                    { field: "GateNameRegis", title: "Cổng", width: "168px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "WorkHourOfficleName", title: "Giờ hành chính", width: "133px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } }
                ]

            });
        }

        p._detailInit = function (e) {
            $("<div/>").appendTo(e.detailCell).kendoGrid({
                dataSource: {
                    transport: {
                        read: "/VisitorWorkingDaily/VisitorDetail?visitorId=" + e.data.VisitorId,
                        create: {
                            cache: true
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                WorkDate: { type: "date" }
                            }
                        }
                    },
                    sortable: true,
                    pageable: true,
                    resizable: true,
                    pageSize: 20,
                    //filter: { field: "EmployeeID", operator: "eq", value: e.data.EmployeeID }
                },
                scrollable: false,
                sortable: true,
                pageable: true,
                columns: [
                        { field: "GateName", title: "Cổng", width: "135px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                        { field: "WorkDate", title: "Ngày làm việc", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                        { field: "ScanTime", title: "Thời gian kiểm tra", width: "90px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                        { field: "IsCheckInName", title: "Vào/Ra", width: "90px", filterable: { cell: { showOperators: false, operator: "contains" }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } } },
                        { field: "VisitorCard", title: "Thẻ khách", width: "120px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                        { field: "Remark", title: "Ghi chú", width: "160px" }
                ]
            });
        }

        $("#btnSearch").on("click", function () {
            p._gridVisitorInit();
            $("div[name='btnShortTerm']").hide();
            $("div[name='btnLongTerm']").hide();
        });

        p._resetDataVisitor = function (ent) {
            if ($("#cbApplicationType").val() === "8") {
                $("div[name='btnShortTerm']").show();
                $("div[name='btnLongTerm']").hide();

                if (ent.IsCheckIn) {
                    $("#txtMdVisitorCardNo").prop("disabled", true);
                    $("#btnVisitorCheckIn").hide();
                    $("#btnVisitorCheckOut").show();
                } else {
                    $("#txtMdVisitorCardNo").prop("disabled", false);
                    $("#btnVisitorCheckIn").show();
                    $("#btnVisitorCheckOut").hide();
                }

            } else {
                $("div[name='btnShortTerm']").hide();
            }
            $("#hdfDetailPersonId").val(ent.VisitorId);
            $("#txtMdVisitorFullName").val(ent.VisitorName);
            $("#txtMdVisitorIdentityCard").val(ent.IdentityCard);
            $("#txtMdVisitorCompany").val(ent.VendorName);
            $("#txtMdVisitorGate").val(ent.GateNameRegis);

            $("#txtMdVisitorFromDate").val(kendo.toString(ent.FromDate, _dateFormatKendo));
            $("#txtMdVisitorToDate").val(kendo.toString(ent.ToDate, _dateFormatKendo));

            $("#txtMdVisitorRemark").val(ent.Remark);
            $("#txtMdVisitorCardNo").val(ent.VisitorCard);

            if (ent.Image === "" || ent.Image === null)
                $("#txtImage").attr("src", "../../Content/assets/img/none-image.png");
            else
                $("#txtImage").attr("src", ent.Image);

            //$("#txtMdVisitorWorkDate").val(kendo.toString(ent.WorkDate, _dateFormatKendo));
            //$("#txtMdVisitorTimeIn").val(ent.TimeIn);
            //$("#txtMdVisitorTimeOut").val(ent.TimeOut);
        }
        p._insert = function (isCheckIn) {
            //int visitorId, string visitorCard, string remark, bool isCheckIn
            var o = this;
            $.ajax({
                type: "POST",
                url: "/VisitorWorkingDaily/Insert",
                data: JSON.stringify({ visitorId: $("#hdfDetailPersonId").val(), visitorCard: $("#txtMdVisitorCardNo").val().toUpperCase(), remark: $("#txtMdVisitorRemark").val(), isCheckIn: isCheckIn, applicationType: $('#cbApplicationType').val() }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                success: function (result) {
                    if (result === "Ok") {
                        showNotification("Hyosung Portal", "Thao tác thành công", "gray success");
                        //reset cho thằng visitor
                        o._gridVisitorInit();
                        _visitor = {
                            VisitorId: 0, ApplicationMaster: 0, Image: "", VisitorName: "", IdentityCard: "", PhoneNumber: "",
                            FromDate: "", ToDate: "", IsWorkHourOfficial: true, VendorName: "", GateNameRegis: "", TimeIn: "", TimeOut: "", VisitorCard: "", Remark: ""
                        }
                        o._resetDataVisitor(_visitor);

                    } else {
                        showNotification("Hyosung Portal", result, "gray error");
                    }
                },
                error: function (mess) {
                    console.log(mess);
                    return false;
                }
            });
        }
        $('#cbApplicationType').on('change', function () {
            p._gridVisitorInit();
        });
        $("#btnVisitorCheckIn").on("click", function () {
            if ($("#hdfDetailPersonId").val() === "" || $("#hdfDetailPersonId").val() === "0") {
                showNotification("Hyosung Portal", "Chọn khách trước khi cho vào", "gray error");
                return;
            }
            if ($("#txtMdVisitorCardNo").val() === "") {
                showNotification("Hyosung Portal", "Xin nhập vào mã thẻ khách", "gray error");
                $("#txtMdVisitorCardNo").focus();
                return;
            }
            if (!confirm("Xác nhận trước khi thực hiện?"))
                return;

            p._insert(true);
        })
        $("#btnVisitorCheckOut").on("click", function () {
            if ($("#hdfDetailPersonId").val() === "" || $("#hdfDetailPersonId").val() === "0") {
                showNotification("Hyosung Portal", "Chọn khách trước khi cho ra", "gray error");
                return;
            }
            if ($("#txtMdVisitorCardNo").val() === "") {
                showNotification("Hyosung Portal", "Xin nhập vào thẻ khách", "gray error");
                $("#txtMdVisitorCardNo").focus();
                return;
            }
            if (!confirm("Xác nhận trước khi thực hiện?"))
                return;
            p._insert(false);
        })
        $("#btnVisitorCheckOff").on("click", function () {
            var o = this;
            var grid = $("#grdVisitorListChecking").data("kendoGrid");

            var ent = [];

            var rows = $(grid.select());
            rows.each(function (index, item) {
                var dataItem = grid.dataItem(this);
                if (dataItem.TimeIn == null)
                    ent.push({ VisitorId: dataItem.VisitorId, VisitorCard: dataItem.VisitorCard });
            });
            if (ent.length === 0) {
                showNotification("Hyosung Portal", "Please select some visitors", "gray error");
                return;
            } else {
                $.ajax({
                    type: "POST",
                    url: "/VisitorWorkingDaily/CheckOff",
                    data: JSON.stringify({list: ent}),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: true,
                    success: function (result) {
                        if (result === "Ok") {
                            showNotification("Hyosung Portal", "Operator success", "gray success");
                            //reset cho thằng Vehicle
                            p._gridVisitorInit();
                            _visitor = {
                                VisitorId: 0, ApplicationMaster: 0, Image: "", VisitorName: "", IdentityCard: "", PhoneNumber: "",
                                FromDate: "", ToDate: "", IsWorkHourOfficial: true, VendorName: "", GateNameRegis: "", TimeIn: "", TimeOut: "", VisitorCard: "", Remark: ""
                            }
                            p._resetDataVisitor(_visitor);
                        } else {
                            showNotification("Hyosung Portal", result, "gray error");
                        }
                    },
                    error: function (mess) {
                        console.log(mess);
                        return false;
                    }
                });
            }
        })
        $("#txtImage").error(function () {
            $(this).unbind("error").attr("src", "../../Content/assets/img/none-image.png");
        });
        //END FORM VISITOR

        // =========================================================================
        // FORM VEHICLE
        // =========================================================================
        //GRID VEHICLE
        p._gridVehicleInit = function () {
            $("#grdVehicleListChecking").html("");
            //short term
            if ($("#cbApplicationTypeVehicle").val() === "8") {
                $("div[name='btnShortTermVehicle']").show();
                $("div[name='btnLongTermVehicle']").hide();
            } else {
                $("div[name='btnShortTermVehicle']").hide();
                $("div[name='btnLongTermVehicle']").show();
            }
            $("#grdVehicleListChecking").kendoGrid({
                dataSource: {
                    transport: {
                        read: "/VisitorWorkingDaily/VehicleGetList?workDate=" + $("#txtWorkDateDefaultVehicle").datepicker("getDate").toISOString() + "&gateId=" + $("#cbGateVehicle").val() + "&applicationType=" + $("#cbApplicationTypeVehicle").val(),
                        create: {
                            cache: true
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                FromDate: { type: "date" },
                                ToDate: { type: "date" },
                                WorkDate: { type: "date" },
                                CreateDate: { type: "date" },
                                NumCheck: { type: "number" }
                            }
                        }
                    },
                    pageSize: 20
                },
                filterable: {
                    mode: "row"
                },
                dataBound: function (e) {
                    this.element.find(".k-filtercell .k-autocomplete .k-clear-value").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-button").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-operator-hidden").css({ "padding-right": 0 });
                    this.element.find(".k-filter-row .k-filtercell").find("input").attr("placeholder", "Tìm kiếm...")

                    var grid = this;
                    grid.tbody.find("tr").each(function (e) {
                        $(this).css("white-space", "nowrap");
                        //var model = grid.dataItem(this);
                        //if (model.TimeIn === null && model.TimeOut === null)
                        //    $(this).css("font-weight", "bold");
                        //if (model.TimeIn !== null && model.TimeOut === null)
                        //    $(this).children().first().addClass("style-info");
                        //if (model.TimeIn === null && model.TimeOut !== null)
                        //    $(this).children().first().addClass("style-warning");
                        //if (model.TimeIn !== null && model.TimeOut !== null)
                        //    $(this).children().first().addClass("style-success");
                    });
                },
                height: $('footer').position().top - 224,
                selectable: "row",
                sortable: true,
                pageable: true,
                resizable: true,
                cache: false,
                detailInit: p._detailVehicleInit,
                columns: [
                    { field: "NumCheck", title: "Số lần kiểm tra", width: "90px", attributes: { "class": "text-right" }, filterable: { cell: { showOperators: false } } },
                    { field: "Code", title: "Mã đơn", width: "171px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "VendorName", title: "Tên công ty", width: "232px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    //{ field: "DriverName", title: "Tên tài xế", width: "170px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    //{ field: "PhoneDriver", title: "Điện thoại", width: "170px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "DriverPlate", title: "Biển số xe", width: "100px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "VehicleTypeName", title: "Loại xe", width: "170px", filterable: { cell: { showOperators: false, operator: "contains" } } },

                    { field: "FromDate", title: "Từ ngày", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false },
                    { field: "ToDate", title: "Tới ngày", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false },
                    { field: "GateNameRegis", title: "Cổng", width: "168px", filterable: { cell: { showOperators: false, operator: "contains" } } },

                ]

            });
        }
        p._detailVehicleInit = function (e) {
            $("<div/>").appendTo(e.detailCell).kendoGrid({
                dataSource: {
                    transport: {
                        read: "/VisitorWorkingDaily/VehicleDetail?visitorId=" + e.data.VehicleId,
                        create: {
                            cache: true
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                WorkDate: { type: "date" }
                            }
                        }
                    },
                    sortable: true,
                    pageable: true,
                    resizable: true,
                    pageSize: 20,
                    //filter: { field: "EmployeeID", operator: "eq", value: e.data.EmployeeID }
                },
                scrollable: false,
                sortable: true,
                pageable: true,
                columns: [
                    { field: "GateName", title: "Cổng", width: "135px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "WorkDate", title: "Ngày làm việc", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "ScanTime", title: "Thời gian kiểm tra", width: "90px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "IsCheckInName", title: "Vào/Ra", width: "90px", filterable: { cell: { showOperators: false, operator: "contains" }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } } },
                    { field: "VehicleCard", title: "Thẻ xe", width: "120px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "ChangeDriver", title: "Tài xế", width: "160px" },
                    { field: "Remark", title: "Ghi chú", width: "160px" }
                ]
            });
        }
        $("#btnSearchVehicle").on("click", function () {
            p._gridVehicleInit();
            $("div[name='btnShortTermVehicle']").hide();
            $("div[name='btnLongTermVehicle']").hide();
        });

        p._resetDataVehicle = function (ent) {
            console.log(ent);
            if ($("#cbApplicationTypeVehicle").val() === "8") {
                $("div[name='btnShortTermVehicle']").show();
                $("div[name='btnLongTermVehicle']").hide();

                if (ent.IsCheckIn) {
                    $("#txtMdVehicleCardNo").prop("disabled", true);
                    $("#btnVehicleCheckIn").hide();
                    $("#btnVehicleCheckOut").show();
                } else {
                    $("#txtMdVehicleCardNo").prop("disabled", false);
                    $("#btnVehicleCheckIn").show();
                    $("#btnVehicleCheckOut").hide();
                }

            } else {
                $("div[name='btnShortTerm']").hide();
                //if (ent.TimeIn !== null) {
                //    $("div[name='btnLongTerm']").hide();
                //} else {
                //    $("div[name='btnLongTerm']").show();
                //}
            }

            $("#hdfDetailVehicleId").val(ent.VehicleId);

            $("#cbMdVisitorVehicleType").val(ent.VehicleType);
            $("#txtMdVendorDriverPlate").val(ent.DriverPlate);

            $("#txtMdVehicleCompany").val(ent.VendorName);
            $("#txtMdVehicleGate").val(ent.GateNameRegis);

            $("#txtMdVehicleFromDate").val(kendo.toString(ent.FromDate, _dateFormatKendo));
            $("#txtMdVehicleToDate").val(kendo.toString(ent.ToDate, _dateFormatKendo));

            $("#txtMdVehicleRemark").val(ent.Remark);
            $("#txtMdVehicleCardNo").val(ent.VehicleCard);

            $("#txtMdVehicleNewDriver").val(ent.ChangeDriver);

            //$("#txtMdVehicleWorkDate").val(kendo.toString(ent.WorkDate, _dateFormatKendo));
            //$("#txtMdVehicleTimeIn").val(ent.TimeIn);
            //$("#txtMdVehicleTimeOut").val(ent.TimeOut);
        }
        p._insertVehicle = function (isCheckIn) {
            //int VehicleId, string VehicleCard, string remark, bool isCheckIn
            var o = this;
            $.ajax({
                type: "POST",
                url: "/VisitorWorkingDaily/VehicleInsert",
                data: JSON.stringify({ vehicleId: $("#hdfDetailVehicleId").val(), vehicleCard: $("#txtMdVehicleCardNo").val().toUpperCase(), remark: $("#txtMdVehicleRemark").val(), isCheckIn: isCheckIn, newDriver: $("#txtMdVehicleNewDriver").val() }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                success: function (result) {
                    if (result === "Ok") {
                        showNotification("Hyosung Portal", "Thao tác thành công", "gray success");
                        //reset cho thằng Vehicle
                        o._gridVehicleInit();
                        _vehicle = {
                            VehicleId: 0, ApplicationMaster: 0, VehicleType: "", VehicleTypeName: "", DriverPlate: "",
                            FromDate: "", ToDate: "", VendorName: "", GateNameRegis: "", TimeIn: "", TimeOut: ""
                        }
                        o._resetDataVehicle(_vehicle);

                    } else {
                        showNotification("Hyosung Portal", result, "gray error");
                    }
                },
                error: function (mess) {
                    console.log(mess);
                    return false;
                }
            });
        }

        $("#btnVehicleCheckIn").on("click", function () {
            if ($("#hdfDetailVehicleId").val() === "" || $("#hdfDetailVehicleId").val() === "0") {
                showNotification("Hyosung Portal", "Xin hãy chọn xe trước khi cho vào", "gray error");
                return;
            }
            if ($("#txtMdVehicleCardNo").val() === "") {
                showNotification("Hyosung Portal", "Xin nhập vào thẻ xe", "gray error");
                $("#txtMdVehicleCardNo").focus();
                return;
            }
            if (!confirm("Xác nhận trước khi thực hiện?"))
                return;

            p._insertVehicle(true);
        })
        $("#btnVehicleCheckOut").on("click", function () {
            if ($("#hdfDetailVehicleId").val() === "" || $("#hdfDetailVehicleId").val() === "0") {
                showNotification("Hyosung Portal", "Xin chọn xe trước khi cho ra", "gray error");
                return;
            }
            if ($("#txtMdVehicleCardNo").val() === "") {
                showNotification("Hyosung Portal", "Xin nhập vào thẻ xe", "gray error");
                $("#txtMdVehicleCardNo").focus();
                return;
            }
            if (!confirm("Xác nhận trước khi thực hiện?"))
                return;
            p._insertVehicle(false);
        })

        $("#btnVehicleCheckOff").on("click", function () {
            var grid = $("#grdVehicleListChecking").data("kendoGrid");

            var ent = [];

            var rows = $(grid.select());
            rows.each(function (index, item) {
                var dataItem = grid.dataItem(this);
                if (dataItem.TimeIn == null)
                    ent.push({ VehicleId: dataItem.VehicleId, VehicleCard: dataItem.VehicleCard });
            });
            if (ent.length === 0) {
                showNotification("Hyosung Portal", "Please select some vehicles", "gray error");
                return;
            } else {
                $.ajax({
                    type: "POST",
                    url: "/VisitorWorkingDaily/VehicleCheckOff",
                    data: JSON.stringify({ list: ent }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: true,
                    success: function (result) {
                        if (result === "Ok") {
                            showNotification("Hyosung Portal", "Operator success", "gray success");
                            //reset cho thằng Vehicle
                            p._gridVehicleInit();
                            _vehicle = {
                                VehicleId: 0, ApplicationMaster: 0, VehicleType: "", VehicleTypeName: "", DriverPlate: "",
                                FromDate: "", ToDate: "", VendorName: "", GateNameRegis: "", TimeIn: "", TimeOut: ""
                            }
                            p._resetDataVehicle(_vehicle);
                        } else {
                            showNotification("Hyosung Portal", result, "gray error");
                        }
                    },
                    error: function (mess) {
                        console.log(mess);
                        return false;
                    }
                });
            }
        })
        //END FORM Vehicle

        // =========================================================================
        // FORM CONTAINER
        // =========================================================================
        p._gridContainerInit = function () {
            $("#grdContainerListChecking").html("");
            $("#grdContainerListChecking").kendoGrid({
                dataSource: {
                    transport: {
                        read: "/VisitorWorkingDaily/ContainerGetList?workDate=" + $("#txtWorkDateDefaultVehicle").datepicker("getDate").toISOString() + "&gateId=" + $("#cbGateContainer").val(),
                        create: {
                            cache: true
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                FromDate: { type: "date" },
                                ToDate: { type: "date" },
                                WorkDate: { type: "date" },
                                CreateDate: { type: "date" },
                                NumCheck: {type: "number"}
                            }
                        }
                    },
                    pageSize: 20
                },
                filterable: {
                    mode: "row"
                },
                dataBound: function (e) {
                    this.element.find(".k-filtercell .k-autocomplete .k-clear-value").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-button").remove();
                    this.element.find(".k-filter-row .k-filtercell .k-operator-hidden").css({ "padding-right": 0 });
                    this.element.find(".k-filter-row .k-filtercell").find("input").attr("placeholder", "Tìm kiếm...")

                    var grid = this;
                    grid.tbody.find("tr").each(function (e) {
                        $(this).css("white-space", "nowrap");
                    });
                },
                height: $('footer').position().top - 224,
                selectable: "row",
                sortable: true,
                pageable: true,
                resizable: true,
                cache: false,
                detailInit: p._detailContainerInit,
                columns: [
                    { field: "NumCheck", title: "Số lần kiểm tra", width: "90px", attributes: { "class": "text-right" }, filterable: { cell: { showOperators: false } } },
                    { field: "Code", title: "Mã đơn", width: "171px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "CompanyName", title: "Tên công ty", width: "232px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "ContainerNum", title: "Số công", width: "170px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "IsImportName", title: "Mục đích", width: "100px", filterable: { cell: { showOperators: false, operator: "contains" } } },

                    { field: "FromDate", title: "Từ ngày", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false },
                    { field: "ToDate", title: "Tới ngày", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false },
                    { field: "GateName", title: "Cổng", width: "168px", filterable: { cell: { showOperators: false, operator: "contains" } } },

                ]

            });
        }
        p._detailContainerInit = function (e) {
            console.log(e.data);
            $("<div/>").appendTo(e.detailCell).kendoGrid({
                dataSource: {
                    transport: {
                        read: "/VisitorWorkingDaily/ContainerDetail?containerId=" + e.data.Id,
                        create: {
                            cache: true
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                WorkDate: { type: "date" }
                            }
                        }
                    },
                    sortable: true,
                    pageable: true,
                    resizable: true,
                    pageSize: 20,
                    //filter: { field: "EmployeeID", operator: "eq", value: e.data.EmployeeID }
                },
                scrollable: false,
                sortable: true,
                pageable: true,
                columns: [
                    { field: "DriverName", title: "Tên tài xế", width: "170px", filterable: { cell: { showOperators: false, operator: "contains" } } },
                    { field: "VehiclePlate", title: "Biển số xe", width: "130px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "WorkDate", title: "Ngày làm việc", width: "120px", format: "{0:yyyy.MM.dd}", filterable: false, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "ScanTime", title: "Thời gian kiểm tra", width: "90px", filterable: { cell: { showOperators: false, operator: "contains" } }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } },
                    { field: "IsCheckinName", title: "Vào/Ra", width: "90px", filterable: { cell: { showOperators: false, operator: "contains" }, headerAttributes: _headerAttributes, attributes: { "class": "text-center" } } },
                    { field: "Remark", title: "Ghi chú", width: "160px" }
                ]
            });
        }
        p._resetDataContainer = function (ent) {

            //if (!ent.IsImport) {
            //    $("#btnContainerCheckIn").hide();
            //    $("#btnContainerCheckOut").show();
            //} else {
            //    $("#btnContainerCheckIn").show();
            //    $("#btnContainerCheckOut").hide();
            //}

            if (ent.IsCheckIn) {
                $("#btnContainerCheckIn").hide();
                $("#btnContainerCheckOut").show();
            } else {
                $("#btnContainerCheckIn").show();
                $("#btnContainerCheckOut").hide();
            }

            $("#txtVendorId").val(ent.CompanyName);
            $("#txtContainerNumber").val(ent.ContainerNum);
            $("#hdfDetailContainerId").val(ent.Id);

            $("#txtContainerGate").val(ent.GateName);

            $("#txtContainerFromDate").val(kendo.toString(ent.FromDate, _dateFormatKendo));
            $("#txtContainerToDate").val(kendo.toString(ent.ToDate, _dateFormatKendo));

            $("#txtContainerRemark").val(ent.Remark);
            $("#txtVehiclePlate").val("");
            $("#hdfVehicleId").val("");
            $("#txtDriverName").val("");
        }
        p._insertContainer = function (isCheckIn) {
            //int containerId, int vehicleId, string remark, bool isCheckIn
            var o = this;
            $.ajax({
                type: "POST",
                url: "/VisitorWorkingDaily/ContainerTrackingInsert",
                data: JSON.stringify({ containerId: $("#hdfDetailContainerId").val(), vehicleId: $("#hdfVehicleId").val(), remark: $("#txtContainerRemark").val(), isCheckIn: isCheckIn }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                success: function (result) {
                    if (result === "Ok") {
                        showNotification("Hyosung Portal", "Thao tác thành công", "gray success");
                        //reset cho thằng Vehicle
                        o._gridContainerInit();
                        _vehicle = {
                            CompanyName: "", ContainerNum: "", GateName: "", FromDate: null, ToDate: null, Remark: ""
                        };
                        o._resetDataContainer(_vehicle);

                    } else {
                        showNotification("Hyosung Portal", result, "gray error");
                    }
                },
                error: function (mess) {
                    console.log(mess);
                    return false;
                }
            });
        }

        $("#btnSearchContainer").on("click", function () {
            p._gridContainerInit();
            $("#btnContainerCheckIn").hide();
            $("#btnContainerCheckOut").hide();
        });
        $("#btnContainerCheckIn").on("click", function () {
            if ($("#hdfDetailContainerId").val() === "" || $("#hdfDetailContainerId").val() === "0") {
                showNotification("Hyosung Portal", "Chọn Công trước khi cho vào", "gray error");
                return;
            }
            if ($("#hdfVehicleId").val() === "") {
                showNotification("Hyosung Portal", "Chọn đầu kéo trước khi cho vào ", "gray error");
                return;
            }
            if (!confirm("Xác nhận trước khi thực hiện?"))
                return;

            p._insertContainer(true);
        })
        $("#btnContainerCheckOut").on("click", function () {
            if ($("#hdfDetailContainerId").val() === "" || $("#hdfDetailContainerId").val() === "0") {
                showNotification("Hyosung Portal", "Chọn Công trước khi cho ra", "gray error");
                return;
            }
            if ($("#hdfVehicleId").val() === "") {
                showNotification("Hyosung Portal", "Chọn đầu kéo trước khi cho ra", "gray error");
                return;
            }
            if (!confirm("Xác nhận trước khi thực hiện?"))
                return;
            p._insertContainer(false);
        })
        //END FORM CONTAINER

        $("#grdVisitorListChecking").on("dblclick", "tbody > tr", function () {
            var grid = $("#grdVisitorListChecking").data("kendoGrid");
            var dataItem = grid.dataItem($(grid.select()));
            p._resetDataVisitor(dataItem);
        })

        $("#grdVehicleListChecking").on("dblclick", "tbody > tr", function () {
            var grid = $("#grdVehicleListChecking").data("kendoGrid");
            var dataItem = grid.dataItem($(grid.select()));
            p._resetDataVehicle(dataItem);
        })

        $("#grdContainerListChecking").on("dblclick", "tbody > tr", function () {
            var grid = $("#grdContainerListChecking").data("kendoGrid");
            var dataItem = grid.dataItem($(grid.select()));
            p._resetDataContainer(dataItem);
        })

        $("#gridListVehicleCurrent").on("dblclick", "tbody > tr", function () {
            var grid = $("#gridListVehicleCurrent").data("kendoGrid");
            var dataItem = grid.dataItem($(grid.select()));

            $("#txtVehiclePlate").val(dataItem.DriverPlate);
            $("#txtDriverName").val(dataItem.DriverName);
            $("#hdfVehicleId").val(dataItem.VehicleId);

            $("#mdVehicleListCurrent").modal("hide");
        })

        var idEncrypt, applicationType;
        $("#grdApplicationMaster").on("dblclick", "tbody > tr", function () {
            var grid = $("#grdApplicationMaster").data("kendoGrid");
            var dataItem = grid.dataItem($(grid.select()));
            
            $("#hdfIsView").val(dataItem.IsView);

            idEncrypt = dataItem.IdEncrypt;
            applicationType = dataItem.ApplicationType;

            $("#mdAppDetailView").modal("show");


            if (dataItem.ApplicationType === "13") {
                var link = '@Url.Action("ShowApplicationDetailView", "ContainerTracking", new { id = "vendorId" })';
                var link = '@Url.Action("ShowApplicationDetailView", "ContainerTracking", new { id = "vendorId" })';
                $.get(link.replace('vendorId', dataItem.IdEncrypt), function (data) {
                        $("#mdAppDetailView .modal-dialog").html(data);
                        $("#mdAppDetailView .modal-body").css({ "max-height": $('footer').position().top - 130, overflow:"auto" });
                });
            } else {
                
                var link = '@Url.Action("ShowApplicationDetailView", "VisitorApplicationMaster", new { id = "vendorId" })';
                $.get(link.replace('vendorId', dataItem.IdEncrypt + "_" + dataItem.ApplicationType + "_visitorapplication"), function (data) {
                    $("#divContent").html(data);
                    var $body = $("#divContent").find(".modal-body").first();
                    $("#divContent").find(".modal-content").first().html($body).removeClass("modal-content").addClass("row");
                    $("#divContent").find(".modal-body").first().removeClass("modal-body").addClass("col-md-12");
                    //$("#mdAppDetailView .modal-body").css({ "max-height": $('footer').position().top - 130, overflow:"auto" });
                });
            }

            $.get(link.replace('vendorId', dataItem.IdEncrypt + "_" + dataItem.ApplicationType + "_checkinout"), function (data) {
                $("#mdAppDetailView .modal-dialog").html(data);
                $("#mdAppDetailView .modal-body").css({ "max-height": $('footer').position().top - 130, overflow: "auto" });
            });
        })

        $("#mdAppDetailView").on('hide.bs.modal', function (e) {
            $("#mdAppDetailView .modal-dialog").html("");
            if ($("#hdfIsView").val() === "false") {
                p._gridApplicationMasterInit();
            }
        });

        $("#mdVehicleListCurrent").on("show.bs.modal", function (e) {
            setTimeout(function () {
                p._gridListVehicleCurrentInit();
            }, 500);
            
            $("#mdVehicleListCurrent .modal-body").css({ "max-height": $('footer').position().top - 130, overflow: "auto" });
        })

        //$("#mdAppDetailView").on('hidden.bs.modal', function (e) {
        //    $("#mdAppDetailView .modal-dialog").html("");
        //    p._gridApplicationMasterInit();
        //});
        $("#btnSearchApplication").on("click", function () {
            p._gridApplicationMasterInit();
        })
        $("a[name='tabVisitor']").on("click", function () {
            $("div[name='tabVisitorContent']").hide();
            $($(this).attr("href")).show();

            $("a[name='tabVisitor']").each(function (index, item) {
                $(this).parent().removeClass("active");
            })

            $("div[name='tabVisitorContent']").each(function (index, item) {
                $(this).addClass("tab-pane");
            })

            $(this).parent().addClass("active");
            $($(this).attr("href")).removeClass("tab-pane");


            switch ($(this).attr("href")) {
                case "#divApplications":
                    p._gridApplicationMasterInit();
                    break;
                case "#divVehicle":
                    p._gridVehicleInit();
                    break;
                case "#divContainer":
                    p._gridContainerInit();
                    break;
                default:
                    p._gridVisitorInit();
                    break;
            }
        })
        namespace.FormVisitorWorkingDaily = new FormVisitorWorkingDaily;
    }(this.materialadmin, jQuery)); // pass in (namespace, jQuery):

</script>
